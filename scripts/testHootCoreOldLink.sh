#!/bin/bash

export CCACHE_DISABLE=1
cd ../hoot-core
rm -f libHootCore.so.1.0.0 libHootCore.so libHootCore.so.1 libHootCore.so.1.0
time( g++ -m64 -Wl,-O1 -shared -Wl,-soname,libHootCore.so.1 -o libHootCore.so.1.0.0 tmp/release/LogLog4Cxx.o tmp/release/ConflatorTest.o tmp/release/MaximalNearestSublineTest.o tmp/release/OsmReaderTest.o tmp/release/RasterComparatorTest.o tmp/release/IntersectionSplitterTest.o tmp/release/GraphComparatorTest.o tmp/release/DividedHighwayManipulationTest.o tmp/release/DividedHighwayMergerTest.o tmp/release/DualWaySplitterTest.o tmp/release/LongestCommonNodeStringTest.o tmp/release/DuplicateWayRemoverTest.o tmp/release/OsmMapTest.o tmp/release/MergeNearbyNodesTest.o tmp/release/LevenshteinDistanceTest.o tmp/release/OsmSchemaTest.o tmp/release/TagComparatorTest.o tmp/release/AttributeComparatorTest.o tmp/release/ClosePointHashTest.o tmp/release/SmallWayMergerTest.o tmp/release/WayMergeManipulationTest.o tmp/release/TestUtils.o tmp/release/TileConflatorTest.o tmp/release/LargeWaySplitterTest.o tmp/release/NodeReplacementsTest.o tmp/release/TileBoundsCalculatorTest.o tmp/release/PbfReaderTest.o tmp/release/PbfWriterTest.o tmp/release/LogisticRegressionTest.o tmp/release/NodeMatcherTest.o tmp/release/SettingsTest.o tmp/release/AlphaShapeTest.o tmp/release/MapCleanerTest.o tmp/release/ObjectOutputStreamTest.o tmp/release/ObjectInputStreamTest.o tmp/release/MapCropperTest.o tmp/release/FourPassManagerTest.o tmp/release/BuildingPartMergeOpTest.o tmp/release/RubberSheetTest.o tmp/release/SoundexTest.o tmp/release/TranslatorTest.o tmp/release/MeanWordSetDistanceTest.o tmp/release/TranslateStringDistanceTest.o tmp/release/MatchGraphTest.o tmp/release/BuildingMatchCreatorTest.o tmp/release/BuildingMergerTest.o tmp/release/RecursiveElementRemoverTest.o tmp/release/MatchComparatorTest.o tmp/release/RemoveDuplicateAreaVisitorTest.o tmp/release/EdgeDistanceExtractorTest.o tmp/release/MaximalSublineTest.o tmp/release/ExpectationIntersectionTest.o tmp/release/PlacesPoiMatchTest.o tmp/release/PlacesPoiMergerTest.o tmp/release/IntegerProgrammingSolverTest.o tmp/release/NodeTest.o tmp/release/PertyNameVisitorTest.o tmp/release/PertyDuplicatePoiOpTest.o tmp/release/PertyRemoveTagVisitorTest.o tmp/release/MapProjectorTest.o tmp/release/GeometryUtilsTest.o tmp/release/TagsTest.o tmp/release/BuildingMergeManipulatorTest.o tmp/release/BigPertyOpTest.o tmp/release/FqTreeTest.o tmp/release/RTreeTest.o tmp/release/RFqHybridTreeTest.o tmp/release/TagMergerFactoryTest.o tmp/release/OverwriteTagMergerTest.o tmp/release/UuidHelperTest.o tmp/release/HighwayMatchTest.o tmp/release/HighwayExpertClassifierTest.o tmp/release/MaximalNearestSublineMatcherTest.o tmp/release/MaximalSublineStringMatcherTest.o tmp/release/KeepNodesVisitorTest.o tmp/release/BufferedLineSegmentIntersectorTest.o tmp/release/WayLocationTest.o tmp/release/WaySublineStringTest.o tmp/release/HighwaySnapMergerTest.o tmp/release/MultiLineStringSplitterTest.o tmp/release/WaySublineMatchStringTest.o tmp/release/OptimalConstrainedMatchesTest.o tmp/release/GreedyConstrainedMatchesTest.o tmp/release/WaySublineTest.o tmp/release/GeometryConverterTest.o tmp/release/MatchFeatureExtractorTest.o tmp/release/MultiPolygonCreatorTest.o tmp/release/ReviewMarkerTest.o tmp/release/TagCountVisitorTest.o tmp/release/MultiLineStringLocationTest.o tmp/release/PertyWaySplitVisitorTest.o tmp/release/RefRemoveOpTest.o tmp/release/FindIntersectionsOpTest.o tmp/release/PertyWayGeneralizeVisitorTest.o tmp/release/RdpWayGeneralizerTest.o tmp/release/RemoveRef2VisitorTest.o tmp/release/PertyRemoveRandomElementVisitorTest.o tmp/release/TagRenameKeyVisitorTest.o tmp/release/TagKeyCountVisitorTest.o tmp/release/SplitNameVisitorTest.o tmp/release/DuplicateNameRemoverTest.o tmp/release/NoInformationElementRemoverTest.o tmp/release/PertyMatchScorerTest.o tmp/release/SingleAssignmentProblemSolverTest.o tmp/release/SampledAngleHistogramExtractorTest.o tmp/release/ArffWriterTest.o tmp/release/ArffReaderTest.o tmp/release/WayCleanerTest.o tmp/release/MapScoringStatusAndRefTagValidatorTest.o tmp/release/ServicesDbTest.o tmp/release/ServicesDbTestUtils.o tmp/release/ServicesDbWriterTest.o tmp/release/ServicesDbReaderTest.o tmp/release/OgrReaderTest.o tmp/release/OgrWriterTest.o tmp/release/CalculateStatsOpTest.o tmp/release/PertyTestRunnerTest.o tmp/release/TranslatedTagDifferencerTest.o tmp/release/Progress.o tmp/release/OgrFeatureProvider.o tmp/release/Conflator.o tmp/release/VectorFeatureProvider.o tmp/release/Manipulator.o tmp/release/Node.o tmp/release/OsmMapIndex.o tmp/release/OgrReader.o tmp/release/OsmReader.o tmp/release/OsmMap.o tmp/release/Way.o tmp/release/Element.o tmp/release/WayData.o tmp/release/NodeData.o tmp/release/ElementData.o tmp/release/MapProjector.o tmp/release/OsmWriter.o tmp/release/WorkingMap.o tmp/release/WayMerger.o tmp/release/DistanceUtils.o tmp/release/WayDiscretizer.o tmp/release/DirectionFinder.o tmp/release/MaximalNearestSubline.o tmp/release/WayLocation.o tmp/release/LocationOfPoint.o tmp/release/Assert.o tmp/release/AssertionFailedException.o tmp/release/HootException.o tmp/release/WayMatchSet.o tmp/release/RasterComparator.o tmp/release/BaseComparator.o tmp/release/GraphComparator.o tmp/release/WaySplitter.o tmp/release/IntersectionSplitter.o tmp/release/DirectedGraph.o tmp/release/ShortestPath.o tmp/release/DividedHighwayMerger.o tmp/release/DividedHighwayManipulation.o tmp/release/WayHeading.o tmp/release/OneWayFilter.o tmp/release/NeighborFilter.o tmp/release/WayFilterChain.o tmp/release/UnknownFilter.o tmp/release/WayDirectionFilter.o tmp/release/LineStringAverager.o tmp/release/ParallelWayFilter.o tmp/release/SuperfluousNodeRemover.o tmp/release/WayBufferFilter.o tmp/release/WayMergeManipulation.o tmp/release/WayAverager.o tmp/release/ProbabilityOfMatch.o tmp/release/SuperfluousWayRemover.o tmp/release/DualWaySplitter.o tmp/release/TagFilter.o tmp/release/Tags.o tmp/release/DistanceNodeFilter.o tmp/release/ChainNodeFilter.o tmp/release/InWayNodeFilter.o tmp/release/UnlikelyIntersectionRemover.o tmp/release/NodeToWayMap.o tmp/release/ImpliedDividedMarker.o tmp/release/MapCropper.o tmp/release/ShapefileWriter.o tmp/release/DuplicateWayRemover.o tmp/release/LongestCommonNodeString.o tmp/release/DuplicateNameRemover.o tmp/release/KnnWayIterator.o tmp/release/MergeNearbyNodes.o tmp/release/LevenshteinDistance.o tmp/release/OsmSchema.o tmp/release/TagComparator.o tmp/release/AttributeComparator.o tmp/release/ClosePointHash.o tmp/release/DanglerRemover.o tmp/release/DanglerRemoverManipulation.o tmp/release/SmallWayMerger.o tmp/release/JsonSchemaLoader.o tmp/release/TileConflator.o tmp/release/Translator.o tmp/release/LargeWaySplitter.o tmp/release/OutsideBoundsRemover.o tmp/release/NotImplementedException.o tmp/release/FileUtils.o tmp/release/NodeReplacements.o tmp/release/TileBoundsCalculator.o tmp/release/PbfReader.o tmp/release/PbfWriter.o tmp/release/PbfConstants.o tmp/release/Command.o tmp/release/Factory.o tmp/release/IdGenerator.o tmp/release/DefaultIdGenerator.o tmp/release/LocalTileWorker.o tmp/release/ConfPath.o tmp/release/GeometryUtils.o tmp/release/SignalCatcher.o tmp/release/Log.o tmp/release/LogisticRegression.o tmp/release/BaseCommand.o tmp/release/MapCleaner.o tmp/release/WayTagMergeManipulation.o tmp/release/WayTagMerger.o tmp/release/RubberSheet.o tmp/release/NodeMatcher.o tmp/release/AttributeConflateCmd.o tmp/release/CleanupCmd.o tmp/release/Settings.o tmp/release/Ogr2OsmCmd.o tmp/release/StatsCmd.o tmp/release/AddOsmPbfHeaderCmd.o tmp/release/Version.o tmp/release/VersionCmd.o tmp/release/CookieCutterCmd.o tmp/release/ElementIterator.o tmp/release/BigOgr2OsmCmd.o tmp/release/ObjectOutputStream.o tmp/release/ObjectInputStream.o tmp/release/OpList.o tmp/release/FourPassManager.o tmp/release/LocalTileWorker2.o tmp/release/ReprojectToPlanarOp.o tmp/release/ReprojectToGeographicOp.o tmp/release/Relation.o tmp/release/RelationData.o tmp/release/AlphaShape.o tmp/release/UnionPolygonsCmd.o tmp/release/AlphaShapeCmd.o tmp/release/ConflateCmd.o tmp/release/PbfElementIterator.o tmp/release/BigCatCmd.o tmp/release/WaySplitterOp.o tmp/release/Osm2ShpCmd.o tmp/release/BuildingPartMergeOp.o tmp/release/ElementToRelationMap.o tmp/release/BuildingOutlineUpdateOp.o tmp/release/ConvertCmd.o tmp/release/VisitorOp.o tmp/release/NamedOp.o tmp/release/ReportMissingElementsVisitor.o tmp/release/KeepBuildingsVisitor.o tmp/release/LengthOfWaysVisitor.o tmp/release/AddRef1Visitor.o tmp/release/AddRef2Visitor.o tmp/release/CentroidDistanceExtractor.o tmp/release/GeometryConverter.o tmp/release/VertexHausdorffDistance.o tmp/release/DeriveRubberSheetCmd.o tmp/release/ApplyRubberSheetCmd.o tmp/release/RubberSheetCmd.o tmp/release/HausdorffDistanceExtractor.o tmp/release/RemoveElementsVisitor.o tmp/release/TagElementFilter.o tmp/release/Building.o tmp/release/OverlapExtractor.o tmp/release/CompactnessExtractor.o tmp/release/AngleHistogramExtractor.o tmp/release/NameExtractor.o tmp/release/PrintNamesCmd.o tmp/release/Soundex.o tmp/release/MeanWordSetDistance.o tmp/release/ScoreMatrix.o tmp/release/MaxWordSetDistance.o tmp/release/TranslateStringDistance.o tmp/release/ExactStringDistance.o tmp/release/BufferedOverlapExtractor.o tmp/release/BuildModelCmd.o tmp/release/SmallerOverlapExtractor.o tmp/release/GetElementIdsVisitor.o tmp/release/CountNodesVisitor.o tmp/release/MatchGraph.o tmp/release/BuildingMerger.o tmp/release/BuildingMergerCreator.o tmp/release/MergerFactory.o tmp/release/Match.o tmp/release/UnifyingConflator.o tmp/release/MatchFactory.o tmp/release/BuildingMatch.o tmp/release/BuildingMatchCreator.o tmp/release/UnifyCmd.o tmp/release/RecursiveElementRemover.o tmp/release/SetVisitor.o tmp/release/MatchComparator.o tmp/release/AddUuidVisitor.o tmp/release/FilteredVisitor.o tmp/release/ScoreMatchesCmd.o tmp/release/TagContainsFilter.o tmp/release/SetTagVisitor.o tmp/release/ElementOsmMapVisitor.o tmp/release/RemoveEmptyRelationsVisitor.o tmp/release/RemoveEmptyAreasVisitor.o tmp/release/RemoveDuplicateAreaVisitor.o tmp/release/MatchThreshold.o tmp/release/MarkForReviewMerger.o tmp/release/MarkForReviewMergerCreator.o tmp/release/EdgeDistanceExtractor.o tmp/release/QuantileAggregator.o tmp/release/HighwayMatch.o tmp/release/HighwayMergerCreator.o tmp/release/HighwayMatchCreator.o tmp/release/HighwayMerger.o tmp/release/HighwaySnapMerger.o tmp/release/HighwaySnapMergerCreator.o tmp/release/WaySnapMerger.o tmp/release/WaySnapMergeManipulation.o tmp/release/MultiLineStringVisitor.o tmp/release/IsCompleteVisitor.o tmp/release/MaximalSubline.o tmp/release/Sparse2dMatrix.o tmp/release/PointsToTracksOp.o tmp/release/RemoveUnknown1Visitor.o tmp/release/UnionPolygonsVisitor.o tmp/release/EvalMoveCmd.o tmp/release/GmlWriter.o tmp/release/ExpectationIntersection.o tmp/release/WaySublineMatch.o tmp/release/WaySubline.o tmp/release/PlacesPoiMatchCreator.o tmp/release/PlacesPoiMatch.o tmp/release/PlacesPoiMerger.o tmp/release/PlacesPoiMergerCreator.o tmp/release/IntersectionFilter.o tmp/release/FindIntersectionsOp.o tmp/release/FindIntersectionsCmd.o tmp/release/FindIntersectionsVisitor.o tmp/release/IntegerProgrammingSolver.o tmp/release/ConstrainedMatches.o tmp/release/CustomPoiMatch.o tmp/release/CustomPoiMatchCreator.o tmp/release/CustomPoiMerger.o tmp/release/CustomPoiMergerCreator.o tmp/release/PertyRemoveRandomElementVisitor.o tmp/release/PertyNameVisitor.o tmp/release/ScriptTranslator.o tmp/release/PythonTranslator.o tmp/release/PertyDuplicatePoiOp.o tmp/release/PertyRemoveTagVisitor.o tmp/release/GeoNamesReader.o tmp/release/TranslationOp.o tmp/release/ScriptTranslatorFactory.o tmp/release/IsMatchCmd.o tmp/release/MapComparator.o tmp/release/ServicesDbWriter.o tmp/release/ServicesDbReader.o tmp/release/BigPertyOp.o tmp/release/PartialOsmMapReader.o tmp/release/OsmMapWriter.o tmp/release/OsmMapReader.o tmp/release/ServicesDb.o tmp/release/OsmMapWriterFactory.o tmp/release/OsmMapReaderFactory.o tmp/release/OgrWriter.o tmp/release/OgrUtilities.o tmp/release/Schema.o tmp/release/Layer.o tmp/release/FeatureDefinition.o tmp/release/Feature.o tmp/release/StringFieldDefinition.o tmp/release/DoubleFieldDefinition.o tmp/release/IntegerFieldDefinition.o tmp/release/FieldDefinition.o tmp/release/Osm2OgrCmd.o tmp/release/FqTree.o tmp/release/RFqHybridTree.o tmp/release/RTree.o tmp/release/ConflateRoadsCmd.o tmp/release/AverageTagMerger.o tmp/release/TagMergerFactory.o tmp/release/GeneralizeTagMerger.o tmp/release/DecomposeBuildingRelationsVisitor.o tmp/release/BuildingOutlineRemoveOp.o tmp/release/OverwriteTagMerger.o tmp/release/KeepHighwaysVisitor.o tmp/release/HighwayExpertClassifier.o tmp/release/MatchClassification.o tmp/release/SublineMatcher.o tmp/release/MaximalNearestSublineMatcher.o tmp/release/UuidHelper.o tmp/release/WaySublineString.o tmp/release/SublineStringMatcher.o tmp/release/MaximalSublineStringMatcher.o tmp/release/CopySubsetOp.o tmp/release/KeepNodesVisitor.o tmp/release/BufferedLineSegmentIntersector.o tmp/release/MergerBase.o tmp/release/MaximalSublineMatcher.o tmp/release/WaySublineMatchString.o tmp/release/MultiLineStringSplitter.o tmp/release/AddGeometryTypeVisitor.o tmp/release/MatchConflicts.o tmp/release/GreedyConstrainedMatches.o tmp/release/OptimalConstrainedMatches.o tmp/release/ExtractWaysVisitor.o tmp/release/ParentFirstVisitorOp.o tmp/release/MatchFeatureExtractor.o tmp/release/HighwayRfClassifier.o tmp/release/DeleteMapCmd.o tmp/release/OgrOptions.o tmp/release/CalculateStatsOp.o tmp/release/BaseFilter.o tmp/release/CalculateAreaVisitor.o tmp/release/BulkInsert.o tmp/release/SqlBulkInsert.o tmp/release/WeightedShapeDistanceExtractor.o tmp/release/WayFeatureExtractor.o tmp/release/DistanceScoreExtractor.o tmp/release/WeightedMetricDistanceExtractor.o tmp/release/ScoreCmd.o tmp/release/OsmJsonWriter.o tmp/release/IoSingleStat.o tmp/release/Hoot.o tmp/release/CreateIntersectionNodesOp.o tmp/release/ExactTagDifferencer.o tmp/release/TagDifferencer.o tmp/release/TranslatedTagDifferencer.o tmp/release/BuildingRfClassifier.o tmp/release/RfExtractorClassifier.o tmp/release/CropMapCmd.o tmp/release/MultiPolygonCreator.o tmp/release/SequenceIdReserver.o tmp/release/InternalIdReserver.o tmp/release/ReviewMarker.o tmp/release/AttributeCoOccuranceCmd.o tmp/release/AttributeCoOccurence.o tmp/release/TagCountVisitor.o tmp/release/TranslatedTagCountVisitor.o tmp/release/TextTable.o tmp/release/MultiLineStringLocation.o tmp/release/PertyWaySplitVisitor.o tmp/release/NotCriterion.o tmp/release/BuildingCriterion.o tmp/release/RefRemoveOp.o tmp/release/NoInformationCriterion.o tmp/release/OrCriterion.o tmp/release/PoiCriterion.o tmp/release/StatusCriterion.o tmp/release/ElementTypeCriterion.o tmp/release/TagCriterion.o tmp/release/PertyWayGeneralizeVisitor.o tmp/release/RandomNumberUtils.o tmp/release/RdpWayGeneralizer.o tmp/release/RemoveRef2Visitor.o tmp/release/OsmUtils.o tmp/release/PrintOsmDocsCmd.o tmp/release/SplitNameVisitor.o tmp/release/TagRenameKeyVisitor.o tmp/release/TagKeyCountVisitor.o tmp/release/MatchScoringMapPreparer.o tmp/release/MapMatchScoringUtils.o tmp/release/PertyTestRunResult.o tmp/release/MapStatsWriter.o tmp/release/NoInformationElementRemover.o tmp/release/GeometryPainter.o tmp/release/PertyOp.o tmp/release/PertyMatchScorer.o tmp/release/PertyCmd.o tmp/release/PertyScoreCmd.o tmp/release/PertyTestCmd.o tmp/release/PertyTestRunner.o tmp/release/PermuteGridCalculator.o tmp/release/DirectSequentialSimulation.o tmp/release/AccuracyDistributionCmd.o tmp/release/ReviewedTagCmd.o tmp/release/TileConflateCmd.o tmp/release/PositiveIdGenerator.o tmp/release/ElementConverter.o tmp/release/PartialOsmMapWriter.o tmp/release/PaintNodesCmd.o tmp/release/TransliterateNameVisitor.o tmp/release/LengthScoreExtractor.o tmp/release/RollInitiativeCmd.o tmp/release/SingleAssignmentProblemSolver.o tmp/release/Histogram.o tmp/release/SampledAngleHistogramExtractor.o tmp/release/PoiRfClassifier.o tmp/release/ArffWriter.o tmp/release/DataSamples.o tmp/release/BuildRfCmd.o tmp/release/ArffReader.o tmp/release/WayCleaner.o tmp/release/MapScoringStatusAndRefTagValidator.o tmp/release/AttributeDistanceExtractor.o tmp/release/AttributeScoreExtractor.o tmp/release/MaxAggregator.o tmp/release/MeanAggregator.o tmp/release/MinAggregator.o tmp/release/RmseAggregator.o tmp/release/SigmaAggregator.o tmp/release/OsmFormat.pb.o tmp/release/FileFormat.pb.o   -L/usr/lib/x86_64-linux-gnu -llog4cxx -lstxxl -lnewmat -lglpk -lcppunit -licuuc -licutu -liculx -licuio -licui18n -lprotobuf -L/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/server/ -L/usr/local/hadoop/c++/Linux-amd64-64/lib -lboost_iostreams -lboost_system -lopencv_core -lopencv_imgproc -L/home/greg/tools/lib -lgdal -L/usr/lib -lgeos_c -lsqlite3 -lodbc -lodbcinst -lkmldom -lkmlbase -lkmlengine -lkmlconvenience -lminizip -luriparser -lexpat -lxerces-c -ljasper -lhdf5 -lgif -ljpeg -ltiff -lpng -L/usr/lib/x86_64-linux-gnu -lpq -lz -lm -lrt -ldl -lpcre -lcurl -L/home/greg/src/FileGDB_API/lib -lFileGDBAPI -lxml2 -lgeos-3.4.2 -L/usr/lib/python2.7 -lpython2.7 -lhdfs -lcrypto -L../lib/ -lTgs -ltbs -lQtTest -lQtScript -lQtSql -lQtXml -lQtGui -lQtCore -lpthread ) 
ln -s libHootCore.so.1.0.0 libHootCore.so
ln -s libHootCore.so.1.0.0 libHootCore.so.1
ln -s libHootCore.so.1.0.0 libHootCore.so.1.0
rm -f ../lib/libHootCore.so.1.0.0
rm -f ../lib/libHootCore.so
rm -f ../lib/libHootCore.so.1
rm -f ../lib/libHootCore.so.1.0
mv -f libHootCore.so.1.0.0 libHootCore.so libHootCore.so.1 libHootCore.so.1.0 ../lib/

export CCACHE_DISABLE=0
