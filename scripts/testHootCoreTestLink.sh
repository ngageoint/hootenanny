#!/bin/bash

cd ../hoot-core-test
export CCACHE_DISABLE=1
rm -f libHootCoreTest.so.1.0.0 libHootCoreTest.so libHootCoreTest.so.1 libHootCoreTest.so.1.0
time( g++ -m64 -Wl,-O1 -shared -Wl,-soname,libHootCoreTest.so.1 -o libHootCoreTest.so.1.0.0 tmp/release/ConflatorTest.o tmp/release/MaximalNearestSublineTest.o tmp/release/OsmReaderTest.o tmp/release/RasterComparatorTest.o tmp/release/IntersectionSplitterTest.o tmp/release/GraphComparatorTest.o tmp/release/DividedHighwayManipulationTest.o tmp/release/DividedHighwayMergerTest.o tmp/release/DualWaySplitterTest.o tmp/release/LongestCommonNodeStringTest.o tmp/release/DuplicateWayRemoverTest.o tmp/release/OsmMapTest.o tmp/release/MergeNearbyNodesTest.o tmp/release/LevenshteinDistanceTest.o tmp/release/OsmSchemaTest.o tmp/release/TagComparatorTest.o tmp/release/AttributeComparatorTest.o tmp/release/ClosePointHashTest.o tmp/release/SmallWayMergerTest.o tmp/release/WayMergeManipulationTest.o tmp/release/TestUtils.o tmp/release/TileConflatorTest.o tmp/release/LargeWaySplitterTest.o tmp/release/NodeReplacementsTest.o tmp/release/TileBoundsCalculatorTest.o tmp/release/PbfReaderTest.o tmp/release/PbfWriterTest.o tmp/release/LogisticRegressionTest.o tmp/release/NodeMatcherTest.o tmp/release/SettingsTest.o tmp/release/AlphaShapeTest.o tmp/release/MapCleanerTest.o tmp/release/ObjectOutputStreamTest.o tmp/release/ObjectInputStreamTest.o tmp/release/MapCropperTest.o tmp/release/FourPassManagerTest.o tmp/release/BuildingPartMergeOpTest.o tmp/release/RubberSheetTest.o tmp/release/SoundexTest.o tmp/release/TranslatorTest.o tmp/release/MeanWordSetDistanceTest.o tmp/release/TranslateStringDistanceTest.o tmp/release/MatchGraphTest.o tmp/release/BuildingMatchCreatorTest.o tmp/release/BuildingMergerTest.o tmp/release/RecursiveElementRemoverTest.o tmp/release/MatchComparatorTest.o tmp/release/RemoveDuplicateAreaVisitorTest.o tmp/release/EdgeDistanceExtractorTest.o tmp/release/MaximalSublineTest.o tmp/release/ExpectationIntersectionTest.o tmp/release/PlacesPoiMatchTest.o tmp/release/PlacesPoiMergerTest.o tmp/release/IntegerProgrammingSolverTest.o tmp/release/NodeTest.o tmp/release/PertyNameVisitorTest.o tmp/release/PertyDuplicatePoiOpTest.o tmp/release/PertyRemoveTagVisitorTest.o tmp/release/MapProjectorTest.o tmp/release/GeometryUtilsTest.o tmp/release/TagsTest.o tmp/release/BuildingMergeManipulatorTest.o tmp/release/BigPertyOpTest.o tmp/release/FqTreeTest.o tmp/release/RTreeTest.o tmp/release/RFqHybridTreeTest.o tmp/release/TagMergerFactoryTest.o tmp/release/OverwriteTagMergerTest.o tmp/release/UuidHelperTest.o tmp/release/HighwayMatchTest.o tmp/release/HighwayExpertClassifierTest.o tmp/release/MaximalNearestSublineMatcherTest.o tmp/release/MaximalSublineStringMatcherTest.o tmp/release/KeepNodesVisitorTest.o tmp/release/BufferedLineSegmentIntersectorTest.o tmp/release/WayLocationTest.o tmp/release/WaySublineStringTest.o tmp/release/HighwaySnapMergerTest.o tmp/release/MultiLineStringSplitterTest.o tmp/release/WaySublineMatchStringTest.o tmp/release/OptimalConstrainedMatchesTest.o tmp/release/GreedyConstrainedMatchesTest.o tmp/release/WaySublineTest.o tmp/release/GeometryConverterTest.o tmp/release/MatchFeatureExtractorTest.o tmp/release/MultiPolygonCreatorTest.o tmp/release/ReviewMarkerTest.o tmp/release/TagCountVisitorTest.o tmp/release/MultiLineStringLocationTest.o tmp/release/PertyWaySplitVisitorTest.o tmp/release/RefRemoveOpTest.o tmp/release/FindIntersectionsOpTest.o tmp/release/PertyWayGeneralizeVisitorTest.o tmp/release/RdpWayGeneralizerTest.o tmp/release/RemoveRef2VisitorTest.o tmp/release/PertyRemoveRandomElementVisitorTest.o tmp/release/TagRenameKeyVisitorTest.o tmp/release/TagKeyCountVisitorTest.o tmp/release/SplitNameVisitorTest.o tmp/release/DuplicateNameRemoverTest.o tmp/release/NoInformationElementRemoverTest.o tmp/release/PertyMatchScorerTest.o tmp/release/SingleAssignmentProblemSolverTest.o tmp/release/SampledAngleHistogramExtractorTest.o tmp/release/ArffWriterTest.o tmp/release/ArffReaderTest.o tmp/release/WayCleanerTest.o tmp/release/MapScoringStatusAndRefTagValidatorTest.o tmp/release/ServicesDbTest.o tmp/release/ServicesDbTestUtils.o tmp/release/ServicesDbWriterTest.o tmp/release/ServicesDbReaderTest.o tmp/release/OgrReaderTest.o tmp/release/OgrWriterTest.o tmp/release/CalculateStatsOpTest.o tmp/release/PertyTestRunnerTest.o tmp/release/TranslatedTagDifferencerTest.o   -L/usr/lib/x86_64-linux-gnu -llog4cxx -lstxxl -lnewmat -lglpk -lcppunit -licuuc -licutu -liculx -licuio -licui18n -lprotobuf -L/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/server/ -L/usr/local/hadoop/c++/Linux-amd64-64/lib -lboost_iostreams -lboost_system -lopencv_core -lopencv_imgproc -L/home/greg/tools/lib -lgdal -L/usr/lib -lgeos_c -lsqlite3 -lodbc -lodbcinst -lkmldom -lkmlbase -lkmlengine -lkmlconvenience -lminizip -luriparser -lexpat -lxerces-c -ljasper -lhdf5 -lgif -ljpeg -ltiff -lpng -L/usr/lib/x86_64-linux-gnu -lpq -lz -lm -lrt -ldl -lpcre -lcurl -L/home/greg/src/FileGDB_API/lib -lFileGDBAPI -lxml2 -lgeos-3.4.2 -L/usr/lib/python2.7 -lpython2.7 -lhdfs -lcrypto -L../lib/ -lTgs -ltbs -lQtTest -lQtScript -lQtSql -lQtXml -lQtGui -lQtCore -lpthread  
)
ln -s libHootCoreTest.so.1.0.0 libHootCoreTest.so
ln -s libHootCoreTest.so.1.0.0 libHootCoreTest.so.1
ln -s libHootCoreTest.so.1.0.0 libHootCoreTest.so.1.0
rm -f ../lib/libHootCoreTest.so.1.0.0
rm -f ../lib/libHootCoreTest.so
rm -f ../lib/libHootCoreTest.so.1
rm -f ../lib/libHootCoreTest.so.1.0
mv -f libHootCoreTest.so.1.0.0 libHootCoreTest.so libHootCoreTest.so.1 libHootCoreTest.so.1.0 ../lib/

export CCACHE_DISABLE=
